<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <script type="text/javascript" src="../../qtek/thirdparty/require.js"></script>
    <script type="text/javascript" src="./js/config.js"></script>
</head>
<body>
    <canvas id="Main"></canvas>
    <script type="text/javascript">
        require(['qtek/qtek',
                'qtek-2d',
                'text!../tests/assets/tiger.svg'], function(qtek, qtek2d, svgData){
            var svgLoader = new qtek2d.loader.SVG();
            var node = svgLoader.parse(svgData);

            var canvas = document.getElementById("Main");
            var renderer = new qtek2d.CanvasRenderer({
                canvas : canvas,
                width : 1024,
                height : 600
            });

            node.style = new qtek2d.Style({
                // globalCompositeOperation : 'xor'
            });

            // Bounding box
            var bbHelpers = [];
            console.profile("compute bounding box");
            node.traverse(function(current){
                if(current instanceof qtek2d.shape.SVGPath){
                    current.computeBoundingBox();
                    var bb = current.boundingBox;
                    var rect = new qtek2d.shape.Rectangle({
                        start : bb.min,
                        fill : false,
                        stroke : true,
                        style : new qtek2d.Style({
                            stroke : 'black',
                            lineWidth : 0.5
                        }),
                        size : bb.max.clone().sub(bb.min),
                        enablePicking : false
                    });
                    bbHelpers.push(rect);

                    // current.add(rect);
                }
            });
            console.profileEnd("compute bounding box");

            console.profile("render");
            renderer.render(node);
            console.profileEnd("render");
        });
    </script>
</body>
</html>